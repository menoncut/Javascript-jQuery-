<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>버블링 활용-2(라이브 이벤트)-일반적 방법</title>
    <script src="../lib/jquery-3.7.1.min.js"></script>
    <style>
      body {
        font-size: 30px;
      }
      ul {
        border: 1px solid black;
        list-style: none;
      }
      ul.menu li {
        border: 1px solid red;
        margin: 10px;
      }
      #add {
        font-size: 30px;
      }
    </style>
  </head>
  <body>
    <div>
      <button id="add">추가</button>
    </div>
    <ul class="menu">
      <li>메뉴1</li>
      <li>메뉴2</li>
      <li>메뉴3</li>
      <li>메뉴4</li>
      <li>메뉴5</li>
    </ul>
  </body>
  <script>
    $(function () {
      // let $menu = $(".menu");
      // let cnt = 5; // 카운트 변수 추가

      // $("#add").click(function (e) {
      //   cnt++; // 카운트 증가
      //   // 동적으로 메뉴 추가하기
      //   $menu.append("<li>메뉴" + cnt + "</li>");
      // });

      // 메뉴 항목에 클릭 이벤트 등록
      // 단점은 동적으로 추가하는 신규 메뉴는 클릭을 해도 메뉴의 정보가 출력이
      // 안된다. 이유는 바로 이벤트를 등록하는 시점에 신규 메뉴 항목은 등록이
      // 되지 않아서 출력이 되지 않는다.
      // $(".menu li").click(function (e) {
      //   alert($(this).html());
      // });

      let $menu = $(".menu");
      let cnt = 5; // 카운트 변수 추가

      $("#add").click(function (e) {
        cnt++; // 카운트 증가
        // 동적으로 신규 메뉴 항목 생성
        let $newItem = $("<li>메뉴" + cnt + "</li>");

        // 신규메뉴 항목에다가 클릭이벤트를 등록하는 코드
        // 신규메뉴가 추가 될때 마다 이벤트 리스너가 늘어난다. 코드의 효율이
        // 나쁘다.
        $newItem.on("click", function (e) {
          alert($(this).html());
        });
        // 메뉴 추가
        $menu.append($newItem);

        // $(".menu").on("click", "li", function (e) {
        //   alert($(this).html());
        // });
      });
      $(".menu li").click(function (e) {
        alert($(this).html());
      });
    });
  </script>
</html>

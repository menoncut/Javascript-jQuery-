<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>String클래스-9(오른쪽공백 제거)</title>
    <script src="../lib/jquery-3.7.1.min.js"></script>
    <style>
      body {
        font-size: 20px;
      }
      #input {
        width: 300px;
      }
      #output {
        width: 600px;
        height: 200px;
        border: 2px solid red;
        text-align: left;
        vertical-align: top;
      }
    </style>
  </head>
  <body>
    <div>
      <input type="text" id="input" />
      <button id="confirm">확인</button>
    </div>
    <br />
    <textarea name="" id="output" cols="30" rows="10">실행결과</textarea>
  </body>
  <script>
    $(function () {
      let $output = $("#output");
      let $input = $("#input");
      //버튼 이벤트 등록
      $("#confirm").click(function () {
        //입력한 값을 알아내기
        let value = $input.val();

        //뒤쪽(오른쪽) 공백 문자 제거
        let result = rtrim(value);
        //$output.html(value + "<br>");
        $output.html(result);
      });
    });

    //뒤쪽 공백 제거 함수
    function rtrim(str) {
      //문자열이 없는 경우
      if (str.length <= 0) {
        return "";
      }
      //뒤쪽 첫 번째 문자가 공백이 아니라면 검사할 필요가 없다.
      let firstChar = str.charAt(str.length - 1);
      //배열은 인덱스 0부터 시작하므로 -1을 하였다.
      if (firstChar != " ") {
        return str;
      }
      let index;
      //공백이 끝나는 위치 찾기
      for (index = str.length - 1; index >= 0; index--) {
        //공백 문자가 아닐때까지 찾기
        let ch = str.charAt(index);
        if (ch != " ") {
          //공백이 아니다라는 것은 곧 문자를 의미해서
          index++;
          break;
        }
      }
      //index위치에서 마지막 위치까지의 문자열을 잘라내고 있다.
      let result = str.slice(0, index);
      return result;
    }
  </script>
</html>
